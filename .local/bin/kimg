#!/usr/bin/env bash

# usage: kd
# list/select api resource types, then objects of that type in current namespace, then kubectl describe the selected object
function main() {
  kubectl get pod \
    --output=go-template='{{range .items}}{{printf "%s:\n" .metadata.name}}{{range .spec.containers}}{{printf "  %s: %s\n" .name .image}}{{end}}{{range .spec.initContainers}}{{printf "  %s: %s\n" .name .image}}{{end}}{{end}}' \
    "${@}"
}

main
